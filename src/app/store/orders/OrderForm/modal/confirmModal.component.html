<!--Start of the modal -->

<div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Confirm Order</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                <!--Start of print slip -->
                <div class="row invoice">
                    <div class="col-12">
                        <div class="invoice-contents" leftmargin="0" marginwidth="0" topmargin="0" marginheight="0"
                            offset="0"
                            style="background-color:#ffffff; max-width:830px; font-family: Helvetica,Arial,sans-serif !important; position: relative;">
                            <table bgcolor="#ffffff" border="0" cellpadding="0" cellspacing="0"
                                style="width:100%; background-color:#ffffff;border-collapse:separate !important; border-spacing:0;color:#242128; margin:0;padding:30px;"
                                heigth="auto">

                                <tbody>
                                    <tr>
                                        <td align="left" valign="center"
                                            style="padding-bottom:35px; padding-top:15px; border-top:0;width:100% !important;">
                                            <img src="https://coloredstrategies.com/mailing/dore.png" />
                                        </td>
                                        <td align="right" valign="center"
                                            style="padding-bottom:35px; padding-top:15px; border-top:0;width:100% !important;">
                                            <p
                                                style="color: #8f8f8f; font-weight: normal; line-height: 1.2; font-size: 12px; white-space: nowrap; ">
                                                JoyiaMotors Pvt Ltd.<br> 35 Main Adda, Mitha Tiwana<br>Jauharabad
                                                Khushab Punjab
                                            </p>
                                        </td>
                                    </tr>
                                    <tr>

                                        <td colspan="2" style="padding-top:30px; border-top:1px solid #f1f0f0">
                                            <!--Client Info to be shown -->
                                            <div class="text-center" *ngIf="client">
                                                <i class="iconsminds-male large-icon"></i>
                                                <h5 class="mb-0 font-weight-semibold color-theme-1 mb-4">Client</h5>
                                            </div>
                                            <table style="width: 100%;" *ngIf="client">
                                                <tbody>
                                                    <tr>
                                                        <td
                                                            style="vertical-align:middle; border-radius: 3px; padding:30px; background-color: #f9f9f9; border-right: 5px solid white;">
                                                            <p
                                                                style="color:#303030; font-size: 14px;  line-height: 1.6; margin:0; padding:0;">
                                                                {{client.personal_info.name}}<br>{{client.personal_info.address}}
                                                            </p>
                                                        </td>
                                                        <td
                                                            style="vertical-align:middle; border-radius: 3px; padding:30px; background-color: #f9f9f9; border-right: 5px solid white;">
                                                            <p
                                                                style="color:#303030; font-size: 14px;  line-height: 1.6; margin:0; padding:0;">
                                                                {{client.personal_info.phone}}<br>{{client.personal_info.cnic}}
                                                            </p>
                                                        </td>

                                                        <td
                                                            style="text-align: right; padding-top:0px; padding-bottom:0; vertical-align:middle; padding:30px; background-color: #f9f9f9; border-radius: 3px; border-left: 5px solid white;">
                                                            <p
                                                                style="color:#8f8f8f; font-size: 14px; padding: 0; line-height: 1.6; margin:0; ">
                                                                Invoice #: 741<br>
                                                                {{currentDate | date:'dd.MM.yy'}}
                                                            </p>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <!--End of client info -->
                                            <!--Guarantor Info to be shown-->
                                            <div class="text-center" *ngIf="guarantors">
                                                <i class="iconsminds-male large-icon"></i>
                                                <h5 class="mb-0 font-weight-semibold color-theme-1 mb-4">Guarantor</h5>
                                            </div>
                                            <table style="width: 100%;" *ngIf="guarantors">
                                                <tbody>
                                                    <tr>

                                                        <td *ngFor="let guarantor of guarantors"
                                                            style="vertical-align:middle; border-radius: 3px; padding:30px; background-color: #f9f9f9; border-right: 5px solid white;">

                                                            <p
                                                                style="color:#303030; font-size: 14px;  line-height: 1.6; margin:0; padding:0;">
                                                                {{guarantor.name}}<br>{{guarantor.phone}}<br>{{guarantor.cnic}}
                                                                <br>{{guarantor.address}}<br>{{guarantor.father_name}}<br>{{guarantor.father_cnic}}
                                                            </p>
                                                        </td>

                                                    </tr>
                                                </tbody>
                                            </table>
                                            <!--End of Guarantor Info to be shown -->
                                            <table style="width: 100%; margin-top:40px;">
                                                <thead>
                                                    <tr>
                                                        <th
                                                            style="text-align:left; font-size: 10px; color:#8f8f8f; padding-bottom: 15px;">
                                                            ITEM NAME
                                                        </th>
                                                        <th
                                                            style="text-align:left; font-size: 10px; color:#8f8f8f; padding-bottom: 15px;">
                                                            COUNT
                                                        </th>
                                                        <th
                                                            style="text-align:left; font-size: 10px; color:#8f8f8f; padding-bottom: 15px;">
                                                            PRICE(each)
                                                        </th>
                                                        <th
                                                            style="text-align:left; font-size: 10px; color:#8f8f8f; padding-bottom: 15px;">
                                                            MARKUP(%)
                                                        </th>
                                                        <th
                                                            style="text-align:left; font-size: 10px; color:#8f8f8f; padding-bottom: 15px;">
                                                            DISCOUNT
                                                        </th>
                                                        <th
                                                            style="text-align:right; font-size: 10px; color:#8f8f8f; padding-bottom: 15px;">
                                                            CHARGES
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody>

                                                    <tr *ngFor="let product of productsTemp">
                                                        <td style="padding-top:0px; padding-bottom:5px;">
                                                            <h4
                                                                style="font-size: 16px; line-height: 1; margin-bottom:0; color:#303030; font-weight:500; margin-top: 10px;">
                                                                {{product.product_display_name}}</h4>
                                                        </td>
                                                        <td>
                                                            <p href="javascript:void(0)"
                                                                style="font-size: 13px; text-decoration: none; line-height: 1; color:#909090; margin-top:0px; margin-bottom:0;">
                                                                {{quantity[product._id]}}pcs</p>
                                                        </td>
                                                        <td>
                                                            <p href="javascript:void(0)"
                                                                style="font-size: 13px; text-decoration: none; line-height: 1; color:#909090; margin-top:0px; margin-bottom:0;">
                                                                Rs. {{charges[product._id].each}}
                                                            </p>
                                                        </td>
                                                        <td>
                                                            <p href="javascript:void(0)"
                                                                style="font-size: 13px; text-decoration: none; line-height: 1; color:#909090; margin-top:0px; margin-bottom:0;">
                                                                <input type="number" value="45"
                                                                    [attr.data]="product._id" class="inputLessWidth"
                                                                    (change)="markupChanged($event)">%
                                                            </p>
                                                        </td>
                                                        <td>
                                                            <p href="javascript:void(0)"
                                                                style="font-size: 13px; text-decoration: none; line-height: 1; color:#909090; margin-top:0px; margin-bottom:0;">
                                                                Rs<input type="number" value="0" class="inputLessWidth"
                                                                    [attr.data]="product._id"
                                                                    (change)="discountChanged($event)"></p>
                                                        </td>
                                                        <td
                                                            style="padding-top:0px; padding-bottom:0; text-align: right;">
                                                            <p
                                                                style="font-size: 13px; line-height: 1; color:#303030; margin-bottom:0; margin-top:0; vertical-align:top; white-space:nowrap;">
                                                                Rs. {{charges[product._id].charges}}
                                                            </p>
                                                        </td>
                                                    </tr>

                                                </tbody>
                                            </table>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            <table bgcolor="#ffffff" border="0" cellpadding="0" cellspacing="0"
                                style="position:relative; bottom:0; width:100%; background-color:#ffffff;border-collapse:separate !important; border-spacing:0;color:#242128; margin:0;padding:30px; padding-top: 20px;"
                                heigth="auto">
                                <tr>
                                    <td colspan="3" style="border-top:1px solid #f1f0f0">&nbsp;</td>
                                </tr>
                                <tr>
                                    <td colspan="2" style="width: 100%">
                                        <p href="javascript:void(0)"
                                            style="font-size: 13px; text-decoration: none; line-height: 1.6; color:#909090; margin-top:0px; margin-bottom:0; text-align: right;">
                                            Subtotal : </p>
                                    </td>
                                    <td style="padding-top:0px; text-align: right;">
                                        <p
                                            style="font-size: 13px; line-height: 1.6; color:#303030; margin-bottom:0; margin-top:0; vertical-align:top; white-space:nowrap; margin-left:15px">
                                            Rs.{{totalCharges}}</p>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2" style="width: 100%">
                                        <p href="javascript:void(0)"
                                            style="font-size: 13px; text-decoration: none; line-height: 1.6; color:#909090; margin-top:0px; margin-bottom:0; text-align: right;">
                                            Tax : </p>
                                    </td>
                                    <td style="padding-top:0px; text-align: right;">
                                        <p
                                            style="font-size: 13px; line-height: 1.6; color:#303030; margin-bottom:0; margin-top:0; vertical-align:top; white-space:nowrap; margin-left:15px">
                                            Rs 0/</p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Next Payment Date</td>
                                    <td style="width: 100%">
                                        <p href="javascript:void(0)"
                                            style="font-size: 13px; text-decoration: none; line-height: 1.6; color:#909090; margin-top:0px; margin-bottom:0; text-align: right;">
                                            Advance Amount : </p>
                                    </td>
                                    <td style="padding-top:0px; text-align: right;">
                                        <p
                                            style="font-size: 13px; line-height: 1.6; color:#303030; margin-bottom:0; margin-top:0; vertical-align:top; white-space:nowrap; margin-left:15px">
                                            Rs <input type="number" name="advance" value="0" id="advanceInput">/</p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <input class="form-control datepicker" name="nextPaymentDate" value="">
                                    </td>
                                    <td style="padding-bottom:15px;">
                                        <p href="javascript:void(0)"
                                            style="font-size: 13px; text-decoration: none; line-height: 1.6; color:#909090; margin-top:0px; margin-bottom:0; text-align: right;">
                                            <strong>Total : </strong>
                                        </p>
                                    </td>
                                    <td style="padding-top:0px; text-align: right; padding-bottom:15px;">
                                        <p
                                            style="font-size: 13px; line-height: 1.6; color:#303030; margin-bottom:0; margin-top:0; vertical-align:top; white-space:nowrap; margin-left:15px">
                                            <strong>Rs {{totalCharges}}/</strong>
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="3" style="border-top:1px solid #f1f0f0">&nbsp;</td>
                                </tr>
                                <tr>
                                    <td colspan="3" style="text-align:center;">
                                        <p style="color: #909090; font-size:11px; text-align:center;">Invoice was
                                            created
                                            on a computer and
                                            is valid without the signature and seal. </p>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>


                <!--End of print slip -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" (click)="addOrder()">Add Order</button>
            </div>
        </div>
    </div>
</div>

<!--End of Modal -->